{"version":3,"sources":["libs/webpack.ts"],"names":[],"mappings":";;;;;AAAA,yCAAoC;AACpC,sDAAiD;AACjD,mCAAwC;AAExC,MAAa,OAAQ,SAAQ,iBAAM;IAC/B;;;OAGG;IACH,KAAK,CAAC,OAAO,CACT,MAA+B;QAE/B,IAAI,aAAa,GAAkB,EAAE,CAAC;QACtC,IAAI,MAAM,EAAE;YACR,IAAI,iBAAQ,CAAC,MAAM,CAAC,EAAE;gBAClB,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;aAClD;iBAAM;gBACH,aAAa,GAAG,MAAM,CAAC;aAC1B;SACJ;QACD,IAAI;YACA,IAAI,CAAC,aAAa,EAAE;gBAChB,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,aAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC;aACjF;YACD,OAAO,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAO,CAAC,aAAa,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE;gBACtE,IAAI,GAAG;oBAAE,OAAO,MAAM,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBAC1C,OAAO,MAAM,KAAK,CAAC;YACvB,CAAC,CAAC,CAAC,CAAC;SACP;QAAC,OAAO,GAAG,EAAE;YACV,OAAO,MAAM,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SACpC;IACL,CAAC;CACJ;AA5BD,0BA4BC","file":"../../libs/webpack.js","sourcesContent":["import { GyiLib } from './gyi.libs';\nimport webpack, { Configuration } from 'webpack';\nimport { isString, join } from 'lodash';\n\nexport class Webpack extends GyiLib {\n    /**\n     * build config import\n     * @param config configpath or webpack.Configuration\n     */\n    async runtime(\n        config?: string | Configuration\n    ): Promise<NodeJS.ReadWriteStream> {\n        let configuration: Configuration = {};\n        if (config) {\n            if (isString(config)) {\n                configuration = Object.create(require(config));\n            } else {\n                configuration = config;\n            }\n        }\n        try {\n            if (!configuration) {\n                configuration = Object.create(require(join(process.cwd(), 'webpack.config')));\n            }\n            return await new Promise(r => webpack(configuration, async (err, stats) => {\n                if (err) return await Promise.reject(err);\n                return await stats;\n            }));\n        } catch (err) {\n            return await Promise.reject(err);\n        }\n    }\n}"]}